Title: LinuxにXperiaをUSBデバッグモードで接続する
Date: 2010-10-03 06:16
Author: masayukig
Tags: Android, 開発, Software
Status: published

以下、URLの情報を参考に、XperiaをUSBデバッグモードでLinux(Fedora13-2.6.36-rc6-sandbox-00084-gc6ea21e)へ接続してみました。

<http://www.adakoda.com/android/000242.html>

<http://salvan-devmemo.blogspot.com/2010/04/ubuntu-1004xperiausb-debug-mode.html>

[Eclipse](http://www.eclipse.org/)と[Android
SDK](http://developer.android.com/sdk/)は、インストール済みが前提。

で、まずは、Xperia側の設定から。

ホーム画面等から、
\[設定\]-\[アプリケーション\]-\[提供元不明のアプリにチェック\]-\[開発\]-\[USBデバッグにチェック\]
[![setting](http://farm5.static.flickr.com/4090/5045424574_ebae73ab4d.jpg)
](http://www.flickr.com/photos/masayun/5045424574/ "setting by masayukig, on Flickr")
[![application](http://farm5.static.flickr.com/4087/5045390040_c45179feb4.jpg)
](http://www.flickr.com/photos/masayun/5045390040/ "application by masayukig, on Flickr")
[![unknown\_appli](http://farm5.static.flickr.com/4154/5044805141_a7dc45a6d0.jpg)
](http://www.flickr.com/photos/masayun/5044805141/ "unknown_appli by masayukig, on Flickr")
[![usb\_debug](http://farm5.static.flickr.com/4086/5045429530_c4ee018fb6.jpg)
](http://www.flickr.com/photos/masayun/5045429530/ "usb_debug by masayukig, on Flickr")
これで、Xperia側の設定は終了。
なお、ここまでの段階ではまだXperiaをUSBで接続しない方が良い。

次に、PC(Linux)側の設定。

> \$ sudo vim /etc/udev/rules.d/51-android.rules
> \$ cat /etc/udev/rules.d/51-android.rules
> SUBSYSTEM=="usb", SYSFS{idVendor}=="0fce", MODE="0666"

というようなファイルを作成し、以下を実行。

> \$ sudo udevadm control --reload-rules
> \$ adb kill-server
> \$ adb start-server

なお、adbコマンドではroot権限は不要。各種コマンドのPATHは通しておいたほうが便利。

で、XperiaをUSBでLinuxマシンに接続。

> \$ adb devices
> List of devices attached
> XXXXXXXXXX(シリアル番号？) device

が表示されればOK。もし、

> \$ adb devices
> List of devices attached
> ??????????(全て"?") device

の場合には、何らかの設定がおかしいか、USBを接続しながらudevのリロードをした等が考えられるので、
再度、USBケーブルの抜き差し等を行ってみる。

で、さっそく適当サンプルアプリを作って動かして、画面キャプチャをとってみました。
[![Xperia's screen
capture](http://farm5.static.flickr.com/4152/5044752593_1161f2882c.jpg)
](http://www.flickr.com/photos/masayun/5044752593/ "Xperia's screen capture by masayukig, on Flickr")

(たかだかスクリーンショットをとるだけなのに、結構大変。。どうにかならんのか？)

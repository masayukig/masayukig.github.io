Title: このブログはサブドメイン(b.0r2.info)で運用することにした
Date: 2011-02-12 05:44
Author: masayukig
Tags: apache, このサイトのこと
Status: published

今まで、このブログは、  
http://www.0r2.info/blog  
で運用していたが、  
http://b.0r2.info/  
で、運用することにしました。

私の環境の場合、(\*.0r2.infoがこのサーバにくるようにしているので)  
DNS設定は特にいじる必要はなく、  
WordPress設定の、  
`WordPress のアドレス (URL)  http://www.0r2.info/blog/サイトのアドレス (URL)   http://www.0r2.info/blog/`  
を  
`WordPress のアドレス (URL)    http://b.0r2.info/サイトのアドレス (URL)  http://b.0r2.info/`  
に変更し、/etc/httpd/conf/httpd.confに、以下を追加し、httpdをrestart。  
\[php\]

ServerAdmin m@0r2.info  
DocumentRoot /var/www/html/b  
ServerName b.0r2.info  
ErrorLog logs/b.0r2.info-error\_log  
CustomLog logs/b.0r2.info-access\_log common

\[/php\]  
で、基本的にはいいのですが、これだと、検索サイト、ブックマーク等からの  
古い記事へのリンクが軒並み、Not Foundになってしまいます。

これを解決する手段を探していたところ、以下の記事を見つけ、解決しました。  
[www.付きドメインとサブドメインの.htaccessリダイレクト](http://wordpress.matometa.net/archives/20080219223538)

上記記事を参考に、以下の記述を追加して、

    # cat /var/www/html/.htaccess
    Redirect permanent /blog http://b.0r2.info/

思い通りの動作：  
http://www.0r2.info/blog/about-2/  
へアクセスすると、  
http://b.0r2.info/about-2/  
へ自動的に転送される様になりました。

ほかのサイトもあるので、はやいとこ、wordpressの複数ブログ機能を使いたいところです。。
